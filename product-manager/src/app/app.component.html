<div class="container">
  <div class="d-flex justify-content-between my-3">
    <button class="btn btn-danger" (click)="countCategory()">CountCategory</button>
    <button class="btn btn-danger" (click)="maxDiscount()">MaxDiscount</button>
    <button class="btn btn-danger" (click)="priceLevel()">PriceLevel</button>
  </div>

  <ng-container *ngIf="selectedProduct">
    <div class="alert alert-primary alert-dismissible fade show" role="alert">
      <button type="button" class="btn-close" (click)="closeProductDetails()"></button>
      <h4 class="alert-heading">{{ selectedProduct.title }}</h4>
      <p>{{ selectedProduct.description }}</p>
      <hr />
      <div class="row">
        <div class="col-md-4" *ngFor="let image of selectedProduct.images">
          <img [src]="image" class="img-fluid mb-2" />
        </div>
      </div>
      <h5 class="mt-3">Kommentek</h5>
      <div *ngFor="let comment of productComments" class="mb-2">
        <strong>{{ comment.user.username }}:</strong>
        <input [(ngModel)]="comment.body" class="form-control" />
      </div>
    </div>
  </ng-container>
  <table class="table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Thumbnail</th>
        <th>Title</th>
        <th>Price</th>
        <th>Discount</th>
        <th>Rating</th>
        <th>Stock</th>
        <th>Brand</th>
        <th>Category</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr
        *ngFor="let product of products"
        [ngClass]="{
          'bg-danger': product.stock < 50,
          'bg-warning': product.stock >= 50 && product.stock < 100,
          'bg-success': product.stock >= 100
        }"
      >
        <td>{{ product.id }}</td>
        <td>
          <img [src]="product.thumbnail" class="rounded-circle" width="50" height="50" />
        </td>
        <td>{{ product.title }}</td>
        <td>{{ product.price }}</td>
        <td>{{ product.discountPercentage }}%</td>
        <td>{{ product.rating }}</td>
        <td>{{ product.stock }}</td>
        <td>{{ product.brand }}</td>
        <td>{{ product.category }}</td>
        <td>
          <button class="btn btn-danger btn-sm" (click)="deleteProduct(product)">DEL</button>
          <button class="btn btn-primary btn-sm" (click)="selectProduct(product)">MORE</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>    